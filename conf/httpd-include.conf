<VirtualHost *:80>
    ServerName         mt4.rosasurfer.com
    ServerAlias  local.mt4.rosasurfer.com
    ServerAdmin  default

    UseCanonicalName Off

    DocumentRoot sites/mt4.rosasurfer.com/httpdocs
    CustomLog    sites/mt4.rosasurfer.com/etc/log/access_log  combined
    ErrorLog     sites/mt4.rosasurfer.com/etc/log/error_log

    RewriteEngine    on
    #RewriteLog      logs/mod_rewrite.log
    #RewriteLogLevel 9


    # Rewrite-Settings mehrerer URL's zur Root-URL des Servers "hin" definieren
    #
    # Zugriffsschutz für CVS-Dateien
    RewriteRule  /(\.cvsignore|CVS)(/.*)?$  -  [F,L]

    # phpinfo()
    RewriteRule    /phpinfo\.php(/.*)?$     sites/php-lib/src/php/phpinfo.php$1       [NS,NE,L]
    <LocationMatch /phpinfo\.php(/.*)?$>
        AuthType Digest
        AuthName 'Webmaster'
        AuthDigestFile  sites/mt4.rosasurfer.com/conf/.htpasswd
        Require valid-user
        BrowserMatch 'MSIE' AuthDigestEnableQueryStringHack=On
    </LocationMatch>

    # APC
    RewriteRule    ^/apc\.php(/.*)?$        sites/php-lib/src/php/apc.php$1           [NS,NE,L]
    <LocationMatch ^/apc\.php(/.*)?$>
        AuthType Digest
        AuthName 'Webmaster'
        AuthDigestFile  sites/mt4.rosasurfer.com/conf/.htpasswd
        Require valid-user
        BrowserMatch 'MSIE' AuthDigestEnableQueryStringHack=On
    </LocationMatch>

    # APD
    RewriteRule  ^/apd/$                    sites/php-lib/src/php/apd.php$1              [NS,NE,L]

    # Content
    RewriteRule  ^/(.+\.php)?$              /var/www/mt4.rosasurfer.com/src/index.php       [NS,NE,L]


    # Location-Settings verschiedener URL's von der Root-URL des Servers "weg" definieren
    #
    # Content
    <Location />
        SetEnv APPLICATION_PATH             '/'

        # PHP-Direktiven, die nicht per Script gesetzt werden können
        php_admin_value open_basedir        '/var/www/php-lib/:/var/www/mt4.rosasurfer.com/'

        php_admin_flag  file_uploads        on
        php_admin_value upload_tmp_dir      'sites/mt4.rosasurfer.com/etc/tmp'
        php_admin_value upload_max_filesize '1000000'
        php_admin_value post_max_size       '1000000'
    </Location>

    # APD
    <Location /apd/>
        php_admin_value open_basedir        none
        php_admin_value include_path        none
        AuthType Digest
        AuthName 'Webmaster'
        AuthDigestFile  sites/mt4.rosasurfer.com/conf/.htpasswd
        Require valid-user
        BrowserMatch 'MSIE' AuthDigestEnableQueryStringHack=On
    </Location>

</VirtualHost>
