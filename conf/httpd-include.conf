<VirtualHost *>
    ServerName         mt4.rosasurfer.com
    ServerAlias  local.mt4.rosasurfer.com
    ServerAdmin     default

    UseCanonicalName Off

    DocumentRoot sites/mt4.rosasurfer.com/httpdocs
    CustomLog    sites/mt4.rosasurfer.com/log/access_log  combined
    ErrorLog     sites/mt4.rosasurfer.com/log/error_log

    RewriteEngine    on
    #RewriteLog      logs/mod_rewrite.log
    #RewriteLogLevel 9


    # Rewrite-Settings mehrerer URL's zur Root-URL des Servers "hin" definieren
    #
    # Zugriffsschutz f√ºr CVS-Dateien
    RewriteRule  /(\.cvsignore|CVS)(/.*)?$  -  [F,L]

    # phpinfo()
    RewriteRule    /phpinfo\.php(/.*)?$     /var/www/php-lib/src/php/phpinfo.php$1       [NS,NE,L]
    <LocationMatch /phpinfo\.php(/.*)?$>
        AuthType Digest
        AuthName 'Webmaster'
        AuthDigestFile  sites/mt4.rosasurfer.com/conf/.htpasswd
        Require valid-user
        BrowserMatch 'MSIE' AuthDigestEnableQueryStringHack=On
    </LocationMatch>

    # APC
    RewriteRule    ^/apc\.php(/.*)?$        /var/www/php-lib/src/php/apc.php$1           [NS,NE,L]
    <LocationMatch ^/apc\.php(/.*)?$>
        AuthType Digest
        AuthName 'Webmaster'
        AuthDigestFile  sites/mt4.rosasurfer.com/conf/.htpasswd
        Require valid-user
        BrowserMatch 'MSIE' AuthDigestEnableQueryStringHack=On
    </LocationMatch>

    # APD
    RewriteRule  ^/apd/$                    /var/www/php-lib/src/php/apd.php$1           [NS,NE,L]

    # Content
    RewriteRule  ^/.+\.php$                 /var/www/mt4.rosasurfer.com/src/index.php       [NS,NE,L]


    # Location-Settings verschiedener URL's von der Root-URL des Servers "weg" definieren
    #
    # Content
    <Location />
        SetEnv APPLICATION_PATH             '/'
        php_admin_value open_basedir        '/var/www/php-lib/;/var/www/mt4.rosasurfer.com/'

        php_admin_value include_path        'sites/mt4.rosasurfer.com/src/WEB-INF'
        php_admin_value session.save_path   'sites/mt4.rosasurfer.com/etc/tmp'
        php_admin_value apd.dumpdir         'sites/mt4.rosasurfer.com/etc/tmp'
        php_admin_value error_log           'sites/mt4.rosasurfer.com/log/php_error_log'
        php_admin_value auto_prepend_file   '/var/www/php-lib/src/phpLib.php'

        php_admin_flag  file_uploads        on
        php_admin_value upload_tmp_dir      'sites/mt4.rosasurfer.com/etc/tmp'
        php_admin_value upload_max_filesize '1000000'
        php_admin_value post_max_size       '1000000'
    </Location>

    # APD
    <Location /apd/>
        php_admin_value open_basedir        none
        php_admin_value include_path        none
        php_admin_value auto_prepend_file  '/var/www/php-lib/src/phpLib.php'
        AuthType Digest
        AuthName 'Webmaster'
        AuthDigestFile  sites/mt4.rosasurfer.com/conf/.htpasswd
        Require valid-user
        BrowserMatch 'MSIE' AuthDigestEnableQueryStringHack=On
    </Location>

</VirtualHost>
