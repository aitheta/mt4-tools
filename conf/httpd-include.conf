<VirtualHost *>
    ServerName       mt4.rosasurfer.com
    ServerAlias local.mt4.rosasurfer.com
    ServerAdmin     default

    UseCanonicalName Off

    DocumentRoot /var/www/mt4.rosasurfer.com/httpdocs
    CustomLog    /var/www/mt4.rosasurfer.com/log/access_log  combined
    ErrorLog     /var/www/mt4.rosasurfer.com/log/error_log


    # mod_rewrite
    RewriteEngine    on
    #RewriteLog      logs/mod_rewrite.log
    #RewriteLogLevel 9

    # Zugriffsschutz f√ºr CVS-Dateien
    RewriteRule  /(\.cvsignore|CVS)(/.*)?$  -  [F,L]

    # phpinfo()
    RewriteRule    /phpinfo\.php(/.*)?$     /var/www/php-lib/src/php/phpinfo.php$1       [NS,NE,L]
    <LocationMatch /phpinfo\.php(/.*)?$>
        AuthType Digest
        AuthName 'Webmaster'
        AuthDigestFile  /var/www/mt4.rosasurfer.com/conf/.htpasswd
        Require valid-user
        BrowserMatch 'MSIE' AuthDigestEnableQueryStringHack=On
    </LocationMatch>

    # APC
    RewriteRule    ^/apc\.php(/.*)?$        /var/www/php-lib/src/php/apc.php$1           [NS,NE,L]
    <LocationMatch ^/apc\.php(/.*)?$>
        AuthType Digest
        AuthName 'Webmaster'
        AuthDigestFile  /var/www/mt4.rosasurfer.com/conf/.htpasswd
        Require valid-user
        BrowserMatch 'MSIE' AuthDigestEnableQueryStringHack=On
    </LocationMatch>

    # APD
    RewriteRule  ^/apd/$                    /var/www/php-lib/src/php/apd.php$1           [NS,NE,L]


    # Content
    RewriteRule  ^/.+\.php$                 /var/www/mt4.rosasurfer.com/httpdocs/index.php           [NS,NE,L]

    <Location />
        SetEnv APPLICATION_PATH             '/'
        php_admin_value open_basedir        '/var/www/php-lib/;/var/www/mt4.rosasurfer.com/src/'

        php_admin_value include_path        '/var/www/mt4.rosasurfer.com/src/WEB-INF'
        php_admin_value session.save_path   '/var/www/mt4.rosasurfer.com/etc/tmp'
        php_admin_value apd.dumpdir         '/var/www/mt4.rosasurfer.com/etc/tmp'
        php_admin_value error_log           '/var/www/mt4.rosasurfer.com/log/php_error_log'
        php_admin_value auto_prepend_file   '/var/www/php-lib/src/phpLib.php'

        php_admin_flag  file_uploads        on
        php_admin_value upload_tmp_dir      '/var/www/mt4.rosasurfer.com/etc/tmp'
        php_admin_value upload_max_filesize '1000000'
        php_admin_value post_max_size       '1000000'
    </Location>


    # APD
    <Location /apd/>
        php_admin_value open_basedir        none
        php_admin_value include_path        none
        php_admin_value auto_prepend_file  '/var/www/php-lib/src/phpLib.php'
        AuthType Digest
        AuthName 'Webmaster'
        AuthDigestFile  /var/www/mt4.rosasurfer.com/conf/.htpasswd
        Require valid-user
        BrowserMatch 'MSIE' AuthDigestEnableQueryStringHack=On
    </Location>

</VirtualHost>
</VirtualHost>
